<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
<h:head>
    <title>Admin - History</title>
    <h:outputStylesheet name="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"/>
</h:head>
<h:body class="bg-light">
    <div class="container py-5">
        <h1 class="text-center mb-4">Order History</h1>

        <h:form id="orderItemsForm">
            <!-- Bootstrap-styled DataTable -->
            <div class="table-responsive">
                <p:dataTable id="orderItemsTable" var="item" value="#{adminBean.orderItemsListHistory}" 
                             paginator="true" rows="10" emptyMessage="No order items found"
                             styleClass="table table-striped table-bordered">
                    
                    <!-- Display Order ID -->
                    <p:column headerText="Order ID" style="text-align:center;">
                        <h:outputText value="#{item.orders.orderId}" />
                    </p:column>

                    <!-- Display User Full Name (First Name + Last Name) -->
                    <p:column headerText="Customer Name" style="text-align:center;">
                        <h:outputText value="#{item.orders.user.firstName} #{item.orders.user.lastName}" />
                    </p:column>

                    <!-- Display Address -->
                    <p:column headerText="Address" style="text-align:center;">
                        <h:outputText value="#{item.orders.user.address}" />
                    </p:column>

                    <!-- Display Product Name -->
                    <p:column headerText="Product Name" style="text-align:center;">
                        <h:outputText value="#{item.item.itemName}" />
                    </p:column>

                    <!-- Display Quantity -->
                    <p:column headerText="Quantity" style="text-align:center;">
                        <h:outputText value="#{item.quantity}" />
                    </p:column>

                    <!-- Display Total Price -->
                    <p:column headerText="Total Price" style="text-align:center;">
                        <h:outputText value="#{item.getTotal()}">
                            <f:convertNumber type="currency" currencySymbol="Rp" locale="id_ID" />
                        </h:outputText>
                    </p:column>

                    <!-- Display Status -->
                    <p:column headerText="Status" style="text-align:center;">
                        <h:outputText value="#{item.orders.status}" />
                    </p:column>
                </p:dataTable>
            </div>
        </h:form>
    </div>

    <h:outputScript name="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"/>
</h:body>
</html>
