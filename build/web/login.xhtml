<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">

    <h:head>
        <title>Login Form</title>
        <!-- Include Bootstrap CSS -->
        <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet" />
        <!-- Include Montserrat Font from Google Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600&amp;display=swap" rel="stylesheet" />

        <!-- Include jQuery UI CSS -->
        <link href="https://code.jquery.com/ui/1.12.1/themes/smoothness/jquery-ui.css" rel="stylesheet" />

       <link rel="stylesheet" href="css/login.css"/>
    </h:head>

    <h:body>
              <ui:include src="header.xhtml" />


        <h:form id="loginForm">
            <div class="container">
                <div class="login-panel">
                    <h2>Sign in</h2>

                    <!-- Messages Component for displaying error/info messages -->
                    <h:messages id="messages" />

                    <!-- Email Input -->
                    <div class="form-group">
                        <p:inputText id="username" value="#{userBean.username}" placeholder="Username" styleClass="form-control" required="true" />
                    </div>

                    <!-- Password Input -->
                    <div class="form-group">
                        <p:password id="password" value="#{userBean.password}" placeholder="Password" styleClass="form-control" required="true" feedback="false" />
                    </div>

                    <!-- Forgot Password Link -->
                    <div class="forgot-password">
                        <h:link value="Forgot Password?" outcome="forgotPassword.xhtml" />
                    </div>

                    <!-- Login Button -->
           <p:commandButton value="Sign in" action="#{userBean.login()}" 
                 styleClass="btn btn-primary" 
                 update="@form"
                 oncomplete="if (PF('errorDialog')) PF('errorDialog').show();" />


                    <!-- Signup Link -->
                    <div class="signup-link">
                        <span>Don't have an account? </span>
                        <h:link value="Sign up" outcome="register.xhtml" />
                    </div>

                    <!-- OR Divider -->
                   

                    <!-- Social Login Buttons -->
                
                </div>
            </div>

            <!-- PrimeFaces Dialog for Error -->
      <p:dialog header="Sign in Error" widgetVar="errorDialog" modal="true" 
          showEffect="fade" hideEffect="fade" closeOnEscape="true"
          rendered="#{userBean.showErrorDialog}">
    <h:panelGroup>
        <p:outputLabel value="Username and Password cannot be empty." />
    </h:panelGroup>
</p:dialog>

        </h:form>

        <!-- Include jQuery, jQuery UI JS, Bootstrap JS, and Font Awesome for icons -->
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.bundle.min.js"></script>
        <script src="https://kit.fontawesome.com/a076d05399.js"></script>

        <script>
   function checkFields() {
    var username = $('#username').val();
    var password = $('#password').val();

    if (!username || !password) {
        PF('errorDialog').show(); // Show dialog if fields are empty
    }
}

        </script>
        
              <ui:include src="footer.xhtml" />

    </h:body>
</html>
